<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Tarea Async/Await</title>
</head>
<body>
    <h1>Práctica de Async/Await</h1>

    <h2>1. Temporizador (setTimeout a Async/Await)</h2>
    <button onclick="ejercicio1()">Ejercicio 1</button>
    <p id="res1">Esperando a que presiones el botó.</p>

    <h2>2. Consulta a API (Datos de Internet)</h2>
    <button onclick="ejercicio2()">Ejercicio 2</button>
    <p id="res2">Esperando a que presiones el botón</p>

    <script>

        //ejercicio 1
        const esperar = (ms) => new Promise(resolve => setTimeout(resolve, ms));

        async function ejercicio1() {
            //Muestro el mensaje inicial
            document.getElementById('res1').innerHTML = "Esperando 2 segundos...";
            
            // Pauso la ejecución 2 segundos sin congelar la página
            await esperar(2000); 
            
            // Se actualiza el mensaje
            document.getElementById('res1').innerHTML = "Callback ejecutándose 2 segundos después";
        }

              //ejercicio 2
        async function ejercicio2() {
            document.getElementById('res2').innerHTML = "Buscando un michi en internet ";
            
            try {
                
                const respuesta = await fetch('https://api.thecatapi.com/v1/images/search');
                const datos = await respuesta.json();
                
                console.log("Datos del gatito /ᐠ > ˕ <マ:", datos);
                
                //La API devuelve un arreglo
                document.getElementById('res2').innerHTML = `
                    <h3>miauuuu<</h3>
                    <img src="${datos[0].url}" width="250" style="border-radius: 15px; box-shadow: 2px 2px 10px rgba(0,0,0,0.2);">
                `;
            } catch (error) {
                console.error(error);
                document.getElementById('res2').innerHTML = "Error al buscar el gatito.";
            }
        }
    </script>
</body>
</html>
